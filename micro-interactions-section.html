<!-- MICRO-INTERACTIONS SECTION -->
<section class="component-section">
    <h2>Micro-Interactions</h2>
    <p>Delightful animations that guide users through marketplace actions with clear feedback and engaging transitions.</p>
    
    <!-- Carousel Container -->
    <div class="micro-carousel">
        <!-- Header -->
        <div class="micro-header">
            <p class="micro-counter" id="micro-counter">1 of 12</p>
            <h3 class="micro-title" id="micro-title">Add to Cart</h3>
            <p class="micro-description" id="micro-description">Arrow slides through with success/fail states</p>
        </div>

        <!-- Component Display Area -->
        <div class="micro-display">
            <div id="micro-component">
                <!-- Component will be injected here -->
            </div>
        </div>

        <!-- Hint -->
        <p class="micro-hint" id="micro-hint">Shift+Click to force out of stock • Double-click to reset</p>

        <!-- Navigation -->
        <div class="micro-nav">
            <button class="micro-nav-btn" id="micro-prev" aria-label="Previous interaction">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <!-- Dots -->
            <div class="micro-dots" id="micro-dots">
                <!-- Dots will be generated by JS -->
            </div>

            <button class="micro-nav-btn" id="micro-next" aria-label="Next interaction">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Instructions -->
        <div class="micro-instructions">
            <p>Use arrow buttons or dots to navigate between micro interactions</p>
        </div>
    </div>
</section>

<style>
/* Micro-Interactions Carousel Styles */
.micro-carousel {
    background: white;
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-xl);
    padding: var(--spacing-12);
    margin-top: var(--spacing-8);
}

.micro-header {
    text-align: center;
    margin-bottom: var(--spacing-8);
}

.micro-counter {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-2);
}

.micro-title {
    font-family: var(--font-heading);
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-2);
}

.micro-description {
    font-family: var(--font-body);
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    margin: 0;
}

.micro-display {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    padding: var(--spacing-8);
    margin: var(--spacing-8) 0;
}

.micro-hint {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-pearl-400);
    text-align: center;
    margin: var(--spacing-4) 0 var(--spacing-8) 0;
}

.micro-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-4);
    margin-bottom: var(--spacing-6);
}

.micro-nav-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: var(--color-shore-base);
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-md);
    color: var(--color-text-primary);
    cursor: pointer;
    transition: all 0.2s;
}

.micro-nav-btn:hover {
    background: var(--color-border-default);
    border-color: var(--color-border-neutral);
}

.micro-dots {
    display: flex;
    gap: var(--spacing-2);
}

.micro-dot {
    width: 8px;
    height: 8px;
    background: var(--color-pearl-300);
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: all 0.3s;
}

.micro-dot:hover {
    background: var(--color-pearl-400);
}

.micro-dot.active {
    background: var(--color-waves-500);
    width: 32px;
}

.micro-instructions {
    background: var(--color-shore-ice);
    padding: var(--spacing-5);
    border-radius: var(--radius-md);
    text-align: center;
}

.micro-instructions p {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin: 0;
}
</style>

<script>
// Micro-interactions data
const microInteractions = [
    {
        id: 1,
        title: "Add to Cart",
        description: "Arrow slides through with success/fail states",
        hint: "Shift+Click to force out of stock • Double-click to reset",
        component: "AddToCartButton"
    },
    {
        id: 2,
        title: "Save for Later",
        description: "Wishlist with sparkle burst effect",
        hint: "Click to toggle save state",
        component: "WishlistButton"
    },
    {
        id: 3,
        title: "Quick View",
        description: "Expanding frame preview animation",
        hint: "Auto-closes after 2 seconds",
        component: "QuickViewButton"
    },
    {
        id: 4,
        title: "Freshness Filter",
        description: "Cycle through Fresh, Chilled, Frozen",
        hint: "Click to cycle between freshness levels",
        component: "FreshnessButton"
    },
    {
        id: 5,
        title: "Reserve Item",
        description: "Countdown timer with rotating arc",
        hint: "Double-click to release reservation",
        component: "ReserveButton"
    },
    {
        id: 6,
        title: "Track Delivery",
        description: "Animated truck with GPS pin waves",
        hint: "Double-click to stop tracking",
        component: "TrackDeliveryButton"
    },
    {
        id: 7,
        title: "Quantity Selector",
        description: "Animated counter with smooth transitions",
        hint: "Click + or - to adjust weight",
        component: "QuantityButton"
    },
    {
        id: 8,
        title: "Pre-Order",
        description: "Calendar pages flip animation",
        hint: "Double-click to cancel pre-order",
        component: "PreOrderButton"
    },
    {
        id: 9,
        title: "Star Rating",
        description: "Interactive star review with bounce",
        hint: "Click stars to rate • Hover to preview",
        component: "ReviewButton"
    },
    {
        id: 10,
        title: "Fresh Catch Tag",
        description: "Wave animation for daily catch items",
        hint: "Click to toggle fresh catch badge",
        component: "FreshCatchButton"
    },
    {
        id: 11,
        title: "Sustainable Badge",
        description: "Eco-friendly verification with leaf burst",
        hint: "Click to verify eco certification",
        component: "SustainableButton"
    },
    {
        id: 12,
        title: "Compare Prices",
        description: "Balance scale with comparison arrows",
        hint: "Click to toggle comparison mode",
        component: "CompareButton"
    }
];

// Carousel state
let currentIndex = 0;

// Initialize carousel
function initMicroCarousel() {
    // Generate dots
    const dotsContainer = document.getElementById('micro-dots');
    microInteractions.forEach((_, index) => {
        const dot = document.createElement('button');
        dot.className = 'micro-dot';
        if (index === 0) dot.classList.add('active');
        dot.setAttribute('aria-label', `Go to interaction ${index + 1}`);
        dot.addEventListener('click', () => goToIndex(index));
        dotsContainer.appendChild(dot);
    });

    // Navigation buttons
    document.getElementById('micro-prev').addEventListener('click', goToPrevious);
    document.getElementById('micro-next').addEventListener('click', goToNext);

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') goToPrevious();
        if (e.key === 'ArrowRight') goToNext();
    });

    // Update display
    updateDisplay();
}

function goToPrevious() {
    currentIndex = currentIndex === 0 ? microInteractions.length - 1 : currentIndex - 1;
    updateDisplay();
}

function goToNext() {
    currentIndex = currentIndex === microInteractions.length - 1 ? 0 : currentIndex + 1;
    updateDisplay();
}

function goToIndex(index) {
    currentIndex = index;
    updateDisplay();
}

function updateDisplay() {
    const current = microInteractions[currentIndex];
    
    // Update text content
    document.getElementById('micro-counter').textContent = `${currentIndex + 1} of ${microInteractions.length}`;
    document.getElementById('micro-title').textContent = current.title;
    document.getElementById('micro-description').textContent = current.description;
    document.getElementById('micro-hint').textContent = current.hint;
    
    // Update dots
    document.querySelectorAll('.micro-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
    });
    
    // Update component display
    // NOTE: This is where you'd load the actual React/Vue component
    // For now, just show a placeholder
    document.getElementById('micro-component').innerHTML = `
        <div style="padding: 2rem; background: var(--color-shore-base); border-radius: 12px; text-align: center;">
            <p style="font-family: var(--font-body); color: var(--color-text-secondary);">
                ${current.component} component preview
            </p>
            <p style="font-family: var(--font-body); font-size: 14px; color: var(--color-pearl-400); margin-top: 8px;">
                (Component implementation pending)
            </p>
        </div>
    `;
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMicroCarousel);
} else {
    initMicroCarousel();
}
</script>
